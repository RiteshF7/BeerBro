# PWA (Progressive Web App) Setup Guide

## Overview
BeerBro is configured as a Progressive Web App (PWA) that can be installed on devices and work offline.

## Current Status
- ✅ PWA configuration is set up
- ✅ Service worker is configured
- ✅ Manifest.json is properly configured
- ✅ Install buttons are implemented
- ⚠️ PWA is disabled in development mode (to avoid conflicts)

## PWA Features
- **Offline Support**: App works without internet connection
- **Installable**: Can be installed on desktop and mobile devices
- **Push Notifications**: Ready for push notification implementation
- **App-like Experience**: Runs in standalone mode when installed

## Testing PWA Installation

### Development Mode
In development mode, PWA features are disabled to avoid conflicts with hot reloading. You'll see:
- PWA status debug info in the top-right corner
- Install button shows a message about development mode
- Service worker is not active

### Production Mode
To test PWA installation:

1. **Build the app**:
   ```bash
   npm run build
   ```

2. **Start production server**:
   ```bash
   npm start
   ```

3. **Test PWA installation**:
   - Open the app in Chrome/Edge
   - Look for the install button in the address bar
   - Or use the "Install App" button on the page
   - The app should prompt for installation

### Mobile Testing
- **iOS**: Use Safari, tap Share button → "Add to Home Screen"
- **Android**: Use Chrome, tap the install prompt or menu → "Install App"

## PWA Components

### InstallAppButton
- Shows install button when PWA is installable
- Handles different browser behaviors
- Provides fallback instructions for unsupported browsers

### PWAInstallPrompt
- Automatic install prompt after 5 seconds
- Can be dismissed by user
- Remembers dismissal preference

### PWAStatus
- Shows offline/online status
- Displays PWA installation status
- Debug info in development mode

## Configuration Files

### next.config.ts
```typescript
export default withPWA({
  dest: 'public',
  register: true,
  skipWaiting: true,
  disable: process.env.NODE_ENV === 'development', // Disabled in dev
  runtimeCaching: [
    // Caching strategies for different resources
  ]
});
```

### public/manifest.json
- App name, description, and icons
- Display mode and theme colors
- Start URL and scope

### Service Worker
- Automatically generated by next-pwa
- Handles caching and offline functionality
- Located in `public/sw.js`

## Troubleshooting

### PWA Not Installing
1. Check if you're in production mode
2. Verify manifest.json is accessible
3. Ensure service worker is registered
4. Check browser console for errors

### Service Worker Issues
1. Clear browser cache and reload
2. Check if service worker is registered in DevTools
3. Verify next-pwa configuration

### Icons Not Showing
1. Ensure icon files exist in public/icons/
2. Check manifest.json icon paths
3. Verify icon sizes and formats

## Browser Support
- **Chrome/Edge**: Full PWA support
- **Firefox**: Basic PWA support
- **Safari**: Limited PWA support (iOS 11.3+)
- **Mobile browsers**: Varies by platform

## Next Steps
1. Create proper PNG icons (192x192, 512x512)
2. Implement push notifications
3. Add offline page
4. Test on various devices and browsers
5. Optimize caching strategies

## Development vs Production
- **Development**: PWA disabled, debug info shown
- **Production**: PWA enabled, full functionality available

Always test PWA features in production mode for accurate results.
